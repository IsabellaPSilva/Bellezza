<ion-content class="fundo">
 
  <!-- Calendário interativo -->
  <ion-card class="fundo">
    <ion-card-content>
      <div class="logo-container">
        <img src="assets/teste-bellezza-logo.jpeg" alt="Logo" class="logo-img" />
      </div>
      <ion-datetime class="fundo"
        presentation="date"
        [(ngModel)]="selectedDate"
        locale="pt-BR">
      </ion-datetime>
    </ion-card-content>
  </ion-card>
 
  <!-- Botões de ação -->
  <div class="botoes-superiores">
    <ion-button class="horario" expand="block" color="medium" (click)="adicionarHorario()">
      <ion-icon name="add-circle-outline" slot="start"></ion-icon>
      Adicionar horário de serviço
    </ion-button>
   
    <ion-button class="lixeira" expand="block" color="danger" (click)="confirmarLimparHistorico()" [disabled]="reservas.length === 0">
      <ion-icon name="trash-outline" slot="start"></ion-icon>
      Limpar histórico
    </ion-button>
  </div>
 
  <!-- Cards de agendamento dinâmicos -->
  <div *ngFor="let reserva of reservas; trackBy: trackByReservaId">
    <ion-card>
      <ion-card-content class="fundo">
        <h2>{{ reserva.cliente }}</h2>
        <p><b>Serviço Principal:</b> {{ reserva.servico }}</p>
       
        <!-- Mostra serviços adicionais se existirem -->
        <div *ngIf="reserva.servicosAdicionais && reserva.servicosAdicionais.length > 0">
          <p><b>Serviços adicionais:</b></p>
          <ul style="margin: 5px 0; padding-left: 15px;">
            <li *ngFor="let servico of reserva.servicosAdicionais">
              {{ servico.name }} - R$ {{ servico.price | number:'1.2-2' }}
            </li>
          </ul>
        </div>
       
        <p><b>Preço Total:</b> {{ reserva.preco }}</p>
        <p><b>Data:</b> {{ reserva.dataExibicao || reserva.data }}</p>
        <p><b>Horário:</b> {{ reserva.horario }}</p>
        <p><b>Status:</b>
          <span [ngClass]="{
            'status-pendente': reserva.status === 'pendente',
            'status-aceito': reserva.status === 'aceito',
            'status-recusado': reserva.status === 'recusado',
            'status-cancelado': reserva.status === 'cancelado'
          }">
            {{ reserva.status === 'pendente' ? 'Pendente' :
               reserva.status === 'aceito' ? 'Aceito' :
               reserva.status === 'recusado' ? 'Recusado' :
               'Cancelado pelo cliente' }}
          </span>
        </p>
        <p *ngIf="reserva.status === 'cancelado' && reserva.motivo">
          <small>Motivo: {{ reserva.motivo }}</small>
        </p>
 
        <!-- Mostrar botões apenas se o status for pendente -->
        <div *ngIf="reserva.status === 'pendente'" class="botoes-acao">
          <ion-button class="recusar" (click)="confirmarAcao('recusar', reserva)">RECUSAR</ion-button>
          <ion-button class="aceitar" (click)="confirmarAcao('aceitar', reserva)">ACEITAR</ion-button>
        </div>
 
      </ion-card-content>
      <ion-item class="trinta" lines="none">
        <ion-label slot="end">
          <b>{{ formatarData(reserva.data) }}</b>
        </ion-label>
      </ion-item>
    </ion-card>
  </div>
 
  <!-- Mensagem quando não há reservas -->
  <div *ngIf="reservas.length === 0" class="sem-reservas">
    <ion-card>
      <ion-card-content>
        <p>Nenhuma reserva encontrada.</p>
      </ion-card-content>
    </ion-card>
  </div>
 
</ion-content>
 
<!-- RODAPÉ -->
<ion-tab-bar slot="bottom">
  <ion-tab-button tab="tab1">
    <ion-icon name="calendar-outline"></ion-icon>
    <ion-label>Agendamentos</ion-label>
  </ion-tab-button>
 
  <ion-tab-button tab="tab2" routerLink="/salao">
    <ion-icon name="person-outline"></ion-icon>
    <ion-label>Perfil</ion-label>
  </ion-tab-button>
 
  <ion-tab-button tab="tab3" routerLink="/reservaP">
    <ion-icon name="storefront-outline"></ion-icon>
    <ion-label>Salão</ion-label>
  </ion-tab-button>
</ion-tab-bar>